<!--pages/index/rand.index.js.wxml-->
<!-- BEGIN:è¯æºå¡ç‰‡ -->
<view class='etym-search-container'>
    <view class='etym-search-bar'>
        <!-- begin:input -->
        <input bindinput='searchTextInput'
               bindfocus='searchFocus'
               bindconfirm='searchTextInput'
               placeholder='è¾“å…¥ä½ æƒ³æŸ¥è¯¢çš„å•è¯'
               bindblur='searchBlur'
               value='{{searchText}}'
               class='search-input'>
        <view class='search-icon'>
            <icon type='{{searchText === "" ? "search" : "cancel" }}' size='18' color='#ffaf2d' bindtap='clearSearch'></icon>
        </view>
        </input>
        <!-- end:input -->

    </view>
    <view class='etym-search-history' wx:if='{{!!searchList && searchList.length > 0}}'>
        <view class="weui-loadmore" wx:if="{{isSearching}}">
            <view class="weui-loading"></view>
            <view class="weui-loadmore__tips">æ­£åœ¨åŠ è½½</view>
        </view>
        <view wx:for="{{searchList}}"
              wx:for-item="searchItem"
              wx:for-index="refIdx"
              class='etym-search-item'
              data-word='{{searchItem.word}}'
              bindtap='searchDetail'>
            <label class="etym-search-item-word">{{searchItem.word}}</label>
            <label class='etym-search-item-translation'>{{searchItem.translation}}</label>
        </view>
    </view>
</view>

<scroll-view scroll-y="true"
             class='etym-card-container'
             bindtap='etymContainerFocus'
             enable-back-to-top='true'
             scroll-with-animation='true'
             scroll-top="{{scrollTop}}">
    <!-- begin:etym-card-header -->
    <view class='etym-card-header' wx:if='{{currentEtym}}'>
        <view class="etym-title etym-title-font">{{currentEtym.trans.word}}</view>
        <view class='etym-phonetic'
              wx:if="{{currentEtym.trans.phonetic}}"
              data-url='https://ssl.gstatic.com/dictionary/static/sounds/oxford/{{currentEtym.word}}--_us_1.mp3'
              bindtap='playAudio'>
            <image class='etym-phonetic-audio' src="assets/speaker.png"></image>
            <label>/{{currentEtym.trans.phonetic}}/</label>
        </view>

        <!-- ç¿»è¯‘åŒºåŸŸ -->
        <view wx:if="{{currentEtym.trans}}">
            <text class='etym-content'>{{currentEtym.trans.translation}}</text>
        </view>
    </view>
    <!-- end:etym-card-header -->

    <!-- BEGIN:è¯æºåŸæ–‡ -->
    <view wx:for="{{currentEtym.etym}}" wx:for-index="idx" wx:for-item="etymInfo" class="etym-info">
        <view class="etym-info-header">
            <label class="etym-title2 etym-title-font">{{etymInfo.name}}</label>
        </view>

        <view class='etym-info-content'>
            <view data-etymindex='{{idx}}'
                  wx:if="{{!etymInfo.final}}"
                  bindtap='switchLang'>
                <label wx:if='{{etymInfo.etymCN && etymInfo.etymCN.length > 0}}' class='etym-switch-lang'>ä¸­â‡„è‹±</label>
                <label wx:if='{{true || !etymInfo.showCN}}'>
                    {{etymInfo.etym}}
                </label>
            </view>

            <view wx:if='{{etymInfo.final||etymInfo.showCN}}'>
                <label wx:if="{{!etymInfo.final}}"
                       data-iscn="{{etymInfo.showCN}}"
                       data-final="{{etymInfo.final}}"
                       data-trans="{{currentEtym.trans}}"
                       data-etym="{{etymInfo.etym}}"
                       data-etymcn="{{etymInfo.etymCN}}"
                       bindtap='impoveTransaltion'
                       data-word='{{etymInfo.name}}'
                       class='etym-info-impove'>çº é”™ğŸ–‹</label>
                <label>
                    {{etymInfo.etymCN}}
                </label>
            </view>
        </view>
    </view>
    <!-- END:è¯æºåŸæ–‡ -->

    <!--BEGIN:FOREIGN-->
    <view wx:if="{{currentEtym.related}}" class='etym-related'>
        <!--begin:etym-foreign-->
        <view class='etym-foreign'>
            <view wx:for="{{currentEtym.related}}"
                  wx:for-index="refIdx"
                  wx:for-item="related"
                  class='etym-related-container {{refIdx % 2 == 0 ? "etym-related-white" : "etym-related-grey"}}'>
                <view>
                    <label class='etym-related-word'
                           data-word='{{related.word}}'
                           bindtap='wordDetail'>{{related.word}}</label>
                    <label class='etym-related-phonetic' wx:if='{{related.phonetic}}'>/{{related.phonetic}}/</label>
                </view>
                <view class='etym-related-translation'>{{related.translation}}</view>
            </view>
        </view>
        <!--end:etym-foreign-->
    </view>
    <!--END:FOREIGN-->

    <!--BEGIN:REF-->
    <view wx:for="{{currentEtym.ref}}" wx:for-item="ref" class='etym-related'>
        <!--begin:etym-ref-->
        <view class='etym-ref'>
            <!-- BEGIN:REF-HEADER -->
            <view class='etym-ref-title'>
                <view>
                    <label class='etym-ref-title-word'
                           data-word='{{ref.word}}'
                           bindtap='wordDetail'>
                        {{ref.word}}
                    </label>
                    <label wx:if='{{ref.dict.phonetic}}' class='etym-ref-title-phonetic'>/{{ref.dict.phonetic}}/</label>
                </view>
                <text>{{ref.dict.translation}}</text>
            </view>
            <!-- END:REF-HEADER -->

            <view wx:if="{{ref.related.length > 0}}" class='etym-related-container etym-related-white}}'>
                <view class='etym-related-counter'> â‡’ ç›¸å…³è¯æ±‡: {{ref.related.length}}ä¸ª</view>
            </view>

            <view wx:for="{{ref.related}}"
                  wx:for-index="refIdx"
                  wx:for-item="related"
                  class='etym-related-container {{refIdx % 2 == 1 ? "etym-related-white" : "etym-related-grey"}}'>
                <view>
                    <label class='etym-related-word'
                           data-word='{{related.word}}'
                           bindtap='wordDetail'>{{related.word}}</label>
                    <label class='etym-related-phonetic' wx:if='{{related.phonetic}}'>/{{related.phonetic}}/</label>
                </view>
                <view class='etym-related-translation'>{{related.translation}}</view>
            </view>
        </view>
        <!--eng:etym-ref-->

    </view>
    <!--END:REF-->
</scroll-view>

<!--èœå•-->
<scroll-view class='menu' wx:if='{{isShowMenu}}'>
    <view class='menu-tips'>
      <label>è‡ªå®šä¹‰éšæœºå•è¯é€‰æ‹©èŒƒå›´, å¦‚æœå…¨éƒ¨å–æ¶ˆå‹¾é€‰, é»˜è®¤ä»COCAè¯å•ä¸­éšæœºé€‰æ‹©å•è¯ (Tips: ç‚¹å‡»ä¸Šæ–¹ç©ºç™½å¤„å³å¯å…³é—­èœå•æ )</label>
    </view>

    <checkbox-group bindchange="checkboxChange" class="menu-container">
        <view class="weui-flex" wx:for="{{menulist}}" wx:for-item="menurow">
            <label class="weui-flex__item menu-item weui-check__label" wx:for="{{menurow}}" wx:for-item="item" wx:if="{{item.desc}}">
                <checkbox class="weui-check" value="{{item.value}}" checked="{{item.checked}}"/>

                <view class="menu-item__hd weui-check__hd_in-checkbox">
                    <icon class="weui-icon-checkbox_circle" type="circle" size="23" color='#ffaf2d' wx:if="{{!item.checked}}"></icon>
                    <icon class="weui-icon-checkbox_success" type="success" size="23" color='#ffaf2d' wx:if="{{item.checked}}"></icon>
                </view>
                <view class="menu-item__bd">{{item.desc}}</view>
            </label>
        </view>
    </checkbox-group>
    
    <view class='menu-tips'>
      <button open-type='share'>åˆ†äº«è¯æº</button>
      <button open-type='contact'>ç”¨æˆ·åé¦ˆ</button>
    </view>
</scroll-view>
<label class='refresh-button' bindtap='refresh' wx:if="{{isRandMode && !isShowMenu}}">â†º</label>
<label class='menu-button' wx:if='{{ !isShowMenu && !!menulist && menulist.length > 0}}' bindtap='switchMenu'>â‰¡</label>
